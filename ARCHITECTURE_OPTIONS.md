# Frontend architecture options with Vue and when to use them

This document summarizes common deployment/rendering models (SPA, SSG, SSR, Hybrid), how they relate to this repository, and when to pick each. 

It also covers full‑stack options and serverless add‑ons.

## In this repository (current)

- Mode: SPA (Single-Page Application) with Vue 2
- Build output: static `dist/` served by any static host
- Data: browser storage (IndexedDB via LocalForage)
- PDF: generated by the browser (`window.print()` in `src/components/invoices/InvoiceControls.vue`)
- Docs: see `WHAT_IS_SPA.md` and `HOW_IT_WORKS.md`

---

## Rendering/deployment models

### 1) SPA (client-side rendered)

- What it is: One `index.html`; routes rendered in the browser. Requires SPA fallback to `index.html`.
- Pros: Rich interactivity, offline/PWA, minimal infra, client-side features (e.g., local PDF generation).
- Cons: Larger initial JS; SEO needs extra care.
- Good for: Tools, dashboards, single-user apps, offline-first workflows.

### 2) SSG (static site generation)

- What it is: HTML for each route is pre-generated at build time.
- Pros: Great SEO and TTFB; can be CDN-only; predictable.
- Cons: Dynamic, per-user pages require client fetching; rebuilds needed to reflect content changes (unless using ISR).
- Good for: Marketing, docs, mostly static content with some dynamic islands.
- With Vue: Nuxt (static/`nuxt generate`), Astro (+Vue), VitePress (docs).

### 3) SSR (server-side rendering)

- What it is: HTML rendered per request on server/edge.
- Pros: Fast first render and SEO for dynamic routes; can stream; auth-ready.
- Cons: Server/runtime required; more ops complexity than SPA/SSG.
- Good for: Dynamic, SEO-critical apps; personalized dashboards with fast TTFB.
- With Vue: Nuxt (SSR mode).

### 4) Hybrid/Edge/ISR

- Mix SSG + SPA hydration + on‑demand revalidation (ISR) or edge rendering.
- Pros: Best of multiple worlds; pre-render critical pages, hydrate others; revalidate without full rebuilds.
- Cons: More moving parts; framework-specific features.
- With Vue: Nuxt + Nitro; Astro hybrid; SvelteKit/Next analogues.

---

## Full‑stack options with Vue

- Vue front-end + API backend (FastAPI/Django/Flask/Express/Nest.js):
  - Use REST/GraphQL; consider BFF (Backend-for-Frontend) for tailored endpoints.
  - Add centralized DB, auth, RBAC, queues, webhooks, email/PDF jobs.
  - Host UI as SPA/SSG/SSR; secure with CORS/Auth tokens/OAuth.

## Serverless functions complement

- Keep static hosting but add small back-end capabilities:
  - Cloudflare Pages Functions/Workers, Netlify Functions, Vercel Functions.
  - Tasks: email invoices, server-generated PDFs, webhooks, cron, secrets.

## PDF generation choices

- Client-side (this repo): `window.print()` + print CSS. Pros: zero infra, offline; Cons: browser differences, less control.
- Server-side: Puppeteer/Playwright (headless Chrome) or wkhtmltopdf. Pros: consistent PDFs, batch generation, background jobs; Cons: runtime/infra required.

## Auth and data considerations
- SPA + local storage: single-user per browser context; export/import for migration.
- Multi-user, shared data: need backend + DB (or BaaS: Supabase/Firebase/Cognito/Auth0).
- Security: keep secrets server-side (functions or backend), not in client.

## SEO and performance

- SEO: SSG/SSR best defaults; SPA can use pre-rendering/meta injection.
- Performance: SSG best initial load; SPA can lazy-load; SSR improves TTFB for dynamic pages.

---

## Decision guide (quick matrix)

- Mostly static routes + strong SEO: choose SSG (Nuxt static, Astro+Vue, VitePress).
- Heavy interactivity/offline + minimal backend: choose SPA (current approach).
- Dynamic + SEO critical + per-user: choose SSR or Hybrid (Nuxt SSR/ISR).
- Need occasional server features but want static hosting: SPA/SSG + serverless functions.
- High-fidelity, consistent PDFs or emailing at scale: add server/worker-based PDF.

## Example stacks

- SPA only: Vue (this repo) + Cloudflare Pages; data in browser; PDF via print dialog.
- SPA + serverless: Vue + CF Workers for email/webhooks; keep data local or use KV/D1.
- SSG site with interactive islands: Astro (+Vue) for marketing/docs, plus a separate SPA tool.
- Full-stack: Nuxt (SSR) + FastAPI (APIs) + Postgres; server-generated PDFs via Puppeteer.

## Migration ideas from this repo

- Keep current SPA for local, private invoicing.
- Add Cloudflare Function to email invoices or proxy to a storage API.
- For multi-user SaaS: migrate to Nuxt (SSR/Hybrid) + backend (FastAPI/Django) + DB; keep client-side print as optional and add server PDFs.
